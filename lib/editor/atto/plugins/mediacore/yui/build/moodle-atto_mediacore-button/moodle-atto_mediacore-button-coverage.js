if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/moodle-atto_mediacore-button/moodle-atto_mediacore-button.js']) {
   __coverage__['build/moodle-atto_mediacore-button/moodle-atto_mediacore-button.js'] = {"path":"build/moodle-atto_mediacore-button/moodle-atto_mediacore-button.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":40},"end":{"line":1,"column":59}}},"2":{"name":"(anonymous_2)","line":48,"loc":{"start":{"line":48,"column":17},"end":{"line":48,"column":28}}},"3":{"name":"(anonymous_3)","line":76,"loc":{"start":{"line":76,"column":18},"end":{"line":76,"column":29}}},"4":{"name":"(anonymous_4)","line":95,"loc":{"start":{"line":95,"column":38},"end":{"line":95,"column":52}}},"5":{"name":"(anonymous_5)","line":106,"loc":{"start":{"line":106,"column":20},"end":{"line":106,"column":36}}},"6":{"name":"(anonymous_6)","line":134,"loc":{"start":{"line":134,"column":17},"end":{"line":134,"column":31}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":160,"column":61}},"2":{"start":{"line":37,"column":0},"end":{"line":157,"column":3}},"3":{"start":{"line":50,"column":8},"end":{"line":52,"column":9}},"4":{"start":{"line":51,"column":12},"end":{"line":51,"column":19}},"5":{"start":{"line":54,"column":8},"end":{"line":60,"column":9}},"6":{"start":{"line":58,"column":12},"end":{"line":58,"column":75}},"7":{"start":{"line":59,"column":12},"end":{"line":59,"column":33}},"8":{"start":{"line":63,"column":8},"end":{"line":63,"column":53}},"9":{"start":{"line":66,"column":8},"end":{"line":70,"column":11}},"10":{"start":{"line":78,"column":8},"end":{"line":81,"column":9}},"11":{"start":{"line":79,"column":12},"end":{"line":79,"column":78}},"12":{"start":{"line":80,"column":12},"end":{"line":80,"column":33}},"13":{"start":{"line":82,"column":8},"end":{"line":98,"column":9}},"14":{"start":{"line":84,"column":12},"end":{"line":88,"column":14}},"15":{"start":{"line":89,"column":12},"end":{"line":89,"column":59}},"16":{"start":{"line":92,"column":12},"end":{"line":92,"column":73}},"17":{"start":{"line":95,"column":12},"end":{"line":97,"column":15}},"18":{"start":{"line":96,"column":16},"end":{"line":96,"column":26}},"19":{"start":{"line":99,"column":8},"end":{"line":99,"column":29}},"20":{"start":{"line":107,"column":8},"end":{"line":107,"column":50}},"21":{"start":{"line":110,"column":8},"end":{"line":113,"column":11}},"22":{"start":{"line":114,"column":8},"end":{"line":120,"column":11}},"23":{"start":{"line":121,"column":8},"end":{"line":121,"column":35}},"24":{"start":{"line":124,"column":8},"end":{"line":124,"column":28}},"25":{"start":{"line":125,"column":8},"end":{"line":125,"column":48}},"26":{"start":{"line":126,"column":8},"end":{"line":126,"column":57}},"27":{"start":{"line":127,"column":8},"end":{"line":127,"column":27}},"28":{"start":{"line":135,"column":8},"end":{"line":135,"column":54}},"29":{"start":{"line":136,"column":8},"end":{"line":136,"column":25}},"30":{"start":{"line":137,"column":8},"end":{"line":137,"column":89}}},"branchMap":{"1":{"line":50,"type":"if","locations":[{"start":{"line":50,"column":8},"end":{"line":50,"column":8}},{"start":{"line":50,"column":8},"end":{"line":50,"column":8}}]},"2":{"line":54,"type":"if","locations":[{"start":{"line":54,"column":8},"end":{"line":54,"column":8}},{"start":{"line":54,"column":8},"end":{"line":54,"column":8}}]},"3":{"line":54,"type":"binary-expr","locations":[{"start":{"line":54,"column":12},"end":{"line":54,"column":39}},{"start":{"line":55,"column":12},"end":{"line":55,"column":28}},{"start":{"line":56,"column":12},"end":{"line":56,"column":35}},{"start":{"line":57,"column":12},"end":{"line":57,"column":29}}]},"4":{"line":78,"type":"if","locations":[{"start":{"line":78,"column":8},"end":{"line":78,"column":8}},{"start":{"line":78,"column":8},"end":{"line":78,"column":8}}]},"5":{"line":82,"type":"if","locations":[{"start":{"line":82,"column":8},"end":{"line":82,"column":8}},{"start":{"line":82,"column":8},"end":{"line":82,"column":8}}]},"6":{"line":137,"type":"binary-expr","locations":[{"start":{"line":137,"column":9},"end":{"line":137,"column":22}},{"start":{"line":137,"column":26},"end":{"line":137,"column":39}},{"start":{"line":137,"column":43},"end":{"line":137,"column":67}}]}},"code":["(function () { YUI.add('moodle-atto_mediacore-button', function (Y, NAME) {","","// This file is part of Moodle - http://moodle.org/","//","// Moodle is free software: you can redistribute it and/or modify","// it under the terms of the GNU General Public License as published by","// the Free Software Foundation, either version 3 of the License, or","// (at your option) any later version.","//","// Moodle is distributed in the hope that it will be useful,","// but WITHOUT ANY WARRANTY; without even the implied warranty of","// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the","// GNU General Public License for more details.","//","// You should have received a copy of the GNU General Public License","// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.","","/**"," * The MediaCore Chooser Atto editor button implementation"," *"," * @package    atto_mediacore"," * @copyright  2014 MediaCore <info@mediacore.com>"," * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later"," */","","/**"," * @module moodle-atto_mediacore-button"," */","","/**"," * Atto text editor mediacore plugin."," *"," * @namespace M.atto_mediacore"," * @class button"," * @extends M.editor_atto.EditorPlugin"," */","Y.namespace('M.atto_mediacore').Button = Y.Base.create('button', Y.M.editor_atto.EditorPlugin, [], {","","    /**","     * A reference to the MediaCore Chooser","     */","    _chooser: null,","","","    /**","     * Init","     */","    initializer: function() {","","        if (this.get('disabled')){","            return;","        }","","        if (!this.get('chooser_js_url') ||","            !this.get('url') ||","            !this.get('launch_url') ||","            !this.get('mode')) {","            var msg = M.util.get_string('noparamserror', 'atto_mediacore');","            throw new Error(msg);","        }","","        // Load the chooser js","        this._loadScript(this.get('chooser_js_url'));","","        // Add the MediaCore Chooser button","        this.addButton({","            icon: 'icon',","            iconComponent: 'atto_mediacore',","            callback: this._initChooser","        });","    },","","    /**","     * Init the Chooser","     */","    _initChooser: function() {","","        if (!mediacore) {","            var msg = M.util.get_string('nochooserjserror', 'atto_mediacore');","            throw new Error(msg);","        }","        if (!this._chooser) {","            // Init the chooser with the following params","            var params = {","                'url': this.get('url'),","                'launchUrl': this.get('launch_url'),","                'mode': this.get('mode')","            };","            this._chooser = mediacore.chooser.init(params);","","            // Listen and handle the Chooser \"media\" event","            this._chooser.on('media', Y.bind(this._insertContent, this));","","            // Listen and handle the Chooser \"error\" event","            this._chooser.on('error', function(err) {","                throw err;","            });","        }","        this._chooser.open();","    },","","    /**","     * Create <a> > <img> elements and inject them into","     * the editor content","     */","    _insertContent: function(media) {","        console.log('insertContent', media, this);","","        // Add an a > img element with the media attributes","        var aElem = Y.Node.create('<a></a>').setAttrs({","            'href': media.embed_url,","            'data-media-id': media.id","        });","        var imgElem = Y.Node.create('<img/>').setAttrs({","            'src':  media.thumb_url,","            'width': '400',","            'height': '225',","            'alt': media.title,","            'title': media.title","        });","        aElem.appendChild(imgElem);","","        // Insert the html into the editor","        this.editor.focus();","        var html = aElem.getDOMNode().outerHTML;","        this.get('host').insertContentAtFocusPoint(html);","        this.markUpdated();","    },","","    /**","     * Load a script url and append to the document.body","     * @param {string} url","     */","    _loadScript: function(url) {","        var script = document.createElement('script');","        script.src = url;","        (document.body || document.head || document.documentElement).appendChild(script);","    }","","}, { ATTRS: {","        disabled: {","            value: false","        },","        chooser_js_url: {","            value: null","        },","        url: {","            value: null","        },","        launch_url: {","            value: null","        },","        mode: {","            value: 'popup'","        }","    }","});","","","}, '@VERSION@', {\"requires\": [\"moodle-editor_atto-plugin\"]});","","}());"]};
}
var __cov_0FVWW1F_paO6eO9lDW6dqw = __coverage__['build/moodle-atto_mediacore-button/moodle-atto_mediacore-button.js'];
__cov_0FVWW1F_paO6eO9lDW6dqw.s['1']++;YUI.add('moodle-atto_mediacore-button',function(Y,NAME){__cov_0FVWW1F_paO6eO9lDW6dqw.f['1']++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['2']++;Y.namespace('M.atto_mediacore').Button=Y.Base.create('button',Y.M.editor_atto.EditorPlugin,[],{_chooser:null,initializer:function(){__cov_0FVWW1F_paO6eO9lDW6dqw.f['2']++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['3']++;if(this.get('disabled')){__cov_0FVWW1F_paO6eO9lDW6dqw.b['1'][0]++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['4']++;return;}else{__cov_0FVWW1F_paO6eO9lDW6dqw.b['1'][1]++;}__cov_0FVWW1F_paO6eO9lDW6dqw.s['5']++;if((__cov_0FVWW1F_paO6eO9lDW6dqw.b['3'][0]++,!this.get('chooser_js_url'))||(__cov_0FVWW1F_paO6eO9lDW6dqw.b['3'][1]++,!this.get('url'))||(__cov_0FVWW1F_paO6eO9lDW6dqw.b['3'][2]++,!this.get('launch_url'))||(__cov_0FVWW1F_paO6eO9lDW6dqw.b['3'][3]++,!this.get('mode'))){__cov_0FVWW1F_paO6eO9lDW6dqw.b['2'][0]++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['6']++;var msg=M.util.get_string('noparamserror','atto_mediacore');__cov_0FVWW1F_paO6eO9lDW6dqw.s['7']++;throw new Error(msg);}else{__cov_0FVWW1F_paO6eO9lDW6dqw.b['2'][1]++;}__cov_0FVWW1F_paO6eO9lDW6dqw.s['8']++;this._loadScript(this.get('chooser_js_url'));__cov_0FVWW1F_paO6eO9lDW6dqw.s['9']++;this.addButton({icon:'icon',iconComponent:'atto_mediacore',callback:this._initChooser});},_initChooser:function(){__cov_0FVWW1F_paO6eO9lDW6dqw.f['3']++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['10']++;if(!mediacore){__cov_0FVWW1F_paO6eO9lDW6dqw.b['4'][0]++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['11']++;var msg=M.util.get_string('nochooserjserror','atto_mediacore');__cov_0FVWW1F_paO6eO9lDW6dqw.s['12']++;throw new Error(msg);}else{__cov_0FVWW1F_paO6eO9lDW6dqw.b['4'][1]++;}__cov_0FVWW1F_paO6eO9lDW6dqw.s['13']++;if(!this._chooser){__cov_0FVWW1F_paO6eO9lDW6dqw.b['5'][0]++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['14']++;var params={'url':this.get('url'),'launchUrl':this.get('launch_url'),'mode':this.get('mode')};__cov_0FVWW1F_paO6eO9lDW6dqw.s['15']++;this._chooser=mediacore.chooser.init(params);__cov_0FVWW1F_paO6eO9lDW6dqw.s['16']++;this._chooser.on('media',Y.bind(this._insertContent,this));__cov_0FVWW1F_paO6eO9lDW6dqw.s['17']++;this._chooser.on('error',function(err){__cov_0FVWW1F_paO6eO9lDW6dqw.f['4']++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['18']++;throw err;});}else{__cov_0FVWW1F_paO6eO9lDW6dqw.b['5'][1]++;}__cov_0FVWW1F_paO6eO9lDW6dqw.s['19']++;this._chooser.open();},_insertContent:function(media){__cov_0FVWW1F_paO6eO9lDW6dqw.f['5']++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['20']++;console.log('insertContent',media,this);__cov_0FVWW1F_paO6eO9lDW6dqw.s['21']++;var aElem=Y.Node.create('<a></a>').setAttrs({'href':media.embed_url,'data-media-id':media.id});__cov_0FVWW1F_paO6eO9lDW6dqw.s['22']++;var imgElem=Y.Node.create('<img/>').setAttrs({'src':media.thumb_url,'width':'400','height':'225','alt':media.title,'title':media.title});__cov_0FVWW1F_paO6eO9lDW6dqw.s['23']++;aElem.appendChild(imgElem);__cov_0FVWW1F_paO6eO9lDW6dqw.s['24']++;this.editor.focus();__cov_0FVWW1F_paO6eO9lDW6dqw.s['25']++;var html=aElem.getDOMNode().outerHTML;__cov_0FVWW1F_paO6eO9lDW6dqw.s['26']++;this.get('host').insertContentAtFocusPoint(html);__cov_0FVWW1F_paO6eO9lDW6dqw.s['27']++;this.markUpdated();},_loadScript:function(url){__cov_0FVWW1F_paO6eO9lDW6dqw.f['6']++;__cov_0FVWW1F_paO6eO9lDW6dqw.s['28']++;var script=document.createElement('script');__cov_0FVWW1F_paO6eO9lDW6dqw.s['29']++;script.src=url;__cov_0FVWW1F_paO6eO9lDW6dqw.s['30']++;((__cov_0FVWW1F_paO6eO9lDW6dqw.b['6'][0]++,document.body)||(__cov_0FVWW1F_paO6eO9lDW6dqw.b['6'][1]++,document.head)||(__cov_0FVWW1F_paO6eO9lDW6dqw.b['6'][2]++,document.documentElement)).appendChild(script);}},{ATTRS:{disabled:{value:false},chooser_js_url:{value:null},url:{value:null},launch_url:{value:null},mode:{value:'popup'}}});},'@VERSION@',{'requires':['moodle-editor_atto-plugin']});
